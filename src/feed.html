{% comment %} ---
permalink: /feed.xml
eleventyExcludeFromCollections: true
---

{%- include "data.liquid" -%}
{% assign posts = collections.posts | rssLastUpdatedDate %}
<!--TODO: Bugfix: Error code for plugin eleventy-plugin-rss -->

<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>{{ site_title }}</title>
    <link>{{ site_url }}</link>
    <description>{{ site_description }}</description>
    <language>{{ site_locale | default: "pt-BR" }}</language>
    <atom:link href="{{ site_url }}/feed.xml" rel="self" type="application/rss+xml"/>

    {% for post in collections.posts %}
    <item>
      <title>{{ post.data.title }}</title>
      <link>{{ site_url }}{{ post.url }}</link>
      <guid>{{ site_url }}{{ post.url }}</guid>
      <pubDate>{{ post.date | dateToRfc822 }}</pubDate>
      <description><![CDATA[
        {{ post.templateContent | truncate(200) }}
      ]]></description>
    </item>
    {% endfor %}
  </channel>
</rss> {% endcomment %}
